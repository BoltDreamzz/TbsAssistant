<!-- cart/templates/cart/cart_detail.html -->
{% extends "partials/base.html" %}
{% load static %}
{%load humanize%}

{% block title %}Cart Detail{% endblock %}
{% block content %}


<style>
    .quantity-input::-webkit-inner-spin-button,
    .quantity-input::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .quantity-input {
        -moz-appearance: textfield;
    }

    .banner-slider {
        position: relative;
        overflow: hidden;
    }

    .banner-slides {
        display: flex;
        transition: transform 0.5s ease-in-out;
    }

    .banner-slide {
        min-width: 100%;
    }

    .banner-indicators {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
    }

    .banner-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: #ccc;
        margin: 0 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .banner-indicator.active {
        background-color: #333;
    }
</style>

<div class="container mx-auto px-4 py-3">
    <h2 class="text-xl font-bold">My shopping basket ({{ cart.items.count }})</h2>
    <div class="text-sm text-gray-500">
        <a href="/" class="hover:text-gray-700">Home</a> / 
        <a href="{%url 'shop:product_list'%}" class="hover:text-gray-700">Basket</a> / 
        <a class="hover:text-gray-700">{{product.name}}</a> 
        <!-- <span class="text-gray-700">Premium Leather Jacket</span> -->
    </div>
</div>
<!-- <p class="text-gray-600 mb-4">You have <strong></strong> items in your cart.</p> -->
<div class="flex flex-col lg:flex-row gap-8">
    <!-- Cart Items Section -->
    <div class="lg:w-2/3">
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">

            {% for item in cart.items.all %}
            <li>
                 —  × 
                = ₦{{ item.get_total_price|intcomma }}
            </li>
            

            <!-- Cart Item 1 -->
            <div class="flex flex-col sm:flex-row border-b border-gray-200 pb-6 mb-6">
                <div class="sm:w-1/4 mb-4 sm:mb-0">
                    <img src="{{item.product.image.url}}"
                        alt="{{item.name}}" class="w-full h-32 object-cover rounded-md">
                </div>
                <div class="sm:w-3/4 sm:pl-6 flex flex-col justify-between">
                    <div>
                        <div class="flex justify-between mb-2">
                            <h3 class="font-medium">{{ item.product.name }}</h3>
                            <button class="text-gray-400 hover:text-gray-600" aria-label="Remove item">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <p class="text-gray-500 text-sm mb-4">Size: {{item.size|default:"Medium"}}</p>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center border border-gray-300 rounded-md">
                            <button class="px-3 py-1 text-gray-600 hover:bg-gray-100" aria-label="Decrease quantity">
                                <i class="fas fa-minus text-xs"></i>
                            </button>
                            <input type="number" value="{{ item.quantity }}" min="1"
                                class="w-12 text-center border-0 focus:ring-0 quantity-input">
                            <button class="px-3 py-1 text-gray-600 hover:bg-gray-100" aria-label="Increase quantity">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                        </div>
                        <div class="text-right">
                            <p class="font-bold">₦{{ item.product.get_current_price|intcomma }}</p>
                            <!-- <p class="text-sm text-gray-500 line-through">$32.99</p> -->
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <li>Your cart is empty.</li>
            {% endfor %}

            
        </div>

        <!-- Continue Shopping -->
        <div class="flex justify-between items-center">
            <a href="{%url 'shop:product_list'%}" class="flex items-center text-gray-600 hover:text-gray-900">
                <i class="fas fa-arrow-left mr-2"></i>
                Continue Shopping
            </a>
            <button class="text-gray-600 hover:text-gray-900 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-4 mr-2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
                  </svg>
                  
                Update Cart
            </button>
        </div>
    </div>

    <!-- Order Summary Section -->
    <div class="lg:w-1/3">
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <h2 class="text-xl font-bold mb-6">Order Summary</h2>

            <div class="space-y-4 mb-6">
                <div class="flex justify-between">
                    <span class="text-gray-600">Subtotal</span>
                    <span class="font-medium">$82.97</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Discount</span>
                    <span class="font-medium text-green-600">-$20.00</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Shipping</span>
                    <span class="font-medium">$5.99</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Tax</span>
                    <span class="font-medium">$6.90</span>
                </div>
                <div class="border-t border-gray-200 pt-4 flex justify-between">
                    <span class="font-bold">Total</span>
                    <span class="font-bold text-xl">$75.86</span>
                </div>
            </div>

            <!-- Promo Code -->
            <div class="mb-6">
                <label for="promo-code" class="block text-sm font-medium text-gray-700 mb-2">Promo Code</label>
                <div class="flex">
                    <input type="text" id="promo-code" placeholder="Enter code"
                        class="flex-1 border border-gray-300 rounded-l-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent">
                    <button
                        class="bg-gray-200 text-gray-700 px-4 py-2 rounded-r-md hover:bg-gray-300 transition-colors duration-300">
                        Apply
                    </button>
                </div>
                <p class="text-green-600 text-sm mt-2">Code "SUMMER20" applied successfully!</p>
            </div>

            <!-- Checkout Button -->
            <button
                class="w-full bg-gray-900 text-white py-3 rounded-md font-medium hover:bg-gray-800 transition-colors duration-300 mb-4">
                Proceed to Checkout
            </button>

            <!-- Payment Methods -->
            <div class="flex justify-center space-x-3">
                <i class="fab fa-cc-visa text-gray-400 text-2xl"></i>
                <i class="fab fa-cc-mastercard text-gray-400 text-2xl"></i>
                <i class="fab fa-cc-amex text-gray-400 text-2xl"></i>
                <i class="fab fa-cc-paypal text-gray-400 text-2xl"></i>
                <i class="fab fa-apple-pay text-gray-400 text-2xl"></i>
            </div>
        </div>

        <!-- Need Help Section -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="font-bold mb-4">Need Help?</h3>
            <ul class="space-y-3 text-gray-600">
                <li>
                    <a href="#" class="flex items-center hover:text-gray-900">
                        <i class="fas fa-truck mr-2"></i>
                        Shipping Information
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center hover:text-gray-900">
                        <i class="fas fa-exchange-alt mr-2"></i>
                        Returns & Exchanges
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center hover:text-gray-900">
                        <i class="fas fa-question-circle mr-2"></i>
                        FAQ
                    </a>
                </li>
                <li>
                    <a href="#" class="flex items-center hover:text-gray-900">
                        <i class="fas fa-headset mr-2"></i>
                        Contact Support
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- You May Also Like Section -->
<section class="mt-16">
    <h2 class="text-2xl font-bold mb-6">You May Also Like</h2>

    <div class="banner-slider rounded-lg overflow-hidden shadow-md mb-8">
        <div class="banner-slides" id="banner-slides">
            <!-- Banner Slide 1 -->
            <div class="banner-slide bg-gradient-to-r from-purple-500 to-indigo-600">
                <div class="flex flex-col md:flex-row items-center p-6 md:p-10">
                    <div class="md:w-1/2 mb-6 md:mb-0 md:pr-8">
                        <h3 class="text-white text-2xl md:text-3xl font-bold mb-3">Complete Your Set</h3>
                        <p class="text-purple-100 mb-4">Add our bestselling hair mask to your routine for the ultimate
                            hair care experience.</p>
                        <button
                            class="bg-white text-purple-700 px-6 py-2 rounded-md font-medium hover:bg-purple-50 transition duration-300">
                            Add to Cart
                        </button>
                    </div>
                    <div class="md:w-1/2 flex justify-center">
                        <img src="https://images.unsplash.com/photo-1643123645026-5e748302d98b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
                            alt="Hair Mask Treatment" class="rounded-lg h-48 md:h-64 object-cover shadow-lg">
                    </div>
                </div>
            </div>
        </div>

        <!-- Banner Indicators -->
        <div class="banner-indicators" id="banner-indicators">
            <div class="banner-indicator active" data-index="0"></div>
        </div>
    </div>
    {% endblock %}